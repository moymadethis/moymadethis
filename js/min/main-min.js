!function(){for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"]||window[i[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i,n){var e=(new Date).getTime(),o=Math.max(0,16-(e-t)),a=window.setTimeout(function(){i(e+o)},o);return t=e+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),$(function(){$(".page-head__toggle").click(function(){return $("body").hasClass("show-nav")?($("body").removeClass("show-nav").addClass("hide-nav"),setTimeout(function(){$("body").removeClass("hide-nav")},800)):$("body").removeClass("hide-nav").addClass("show-nav"),!1})}),$(function(){svg4everybody()}),$("#metropallax").parallax({calibrateX:!1,calibrateY:!0,invertX:!1,invertY:!0,limitX:!1,limitY:0,scalarX:2,scalarY:8,frictionX:.2,frictionY:.8,originX:0,originY:1}),$(function(){function t(t){this.x=0,this.y=0,this.xVelocity=0,this.yVelocity=0,this.radius=5,this.context=t,this.draw=function(){return this.image?void this.context.drawImage(this.image,this.x-128,this.y-128):(this.context.beginPath(),this.context.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.context.fillStyle="rgba(0, 255, 255, 1)",this.context.fill(),void this.context.closePath())},this.update=function(){this.x+=this.xVelocity,this.y+=this.yVelocity,this.x>=r?(this.xVelocity=-this.xVelocity,this.x=r):this.x<=0&&(this.xVelocity=-this.xVelocity,this.x=0),this.y>=h?(this.yVelocity=-this.yVelocity,this.y=h):this.y<=0&&(this.yVelocity=-this.yVelocity,this.y=0)},this.setPosition=function(t,i){this.x=t,this.y=i},this.setVelocity=function(t,i){this.xVelocity=t,this.yVelocity=i},this.setImage=function(t){this.image=t}}function i(t,i){return Math.random()*(i-t)+t}function n(){var n=document.getElementById("smoke");if(n.getContext){m=n.getContext("2d");for(var e=0;s>e;++e){var o=new t(m);o.setPosition(i(0,r),i(0,h)),o.setVelocity(i(-c,c),i(-c,c)),a.push(o)}}else alert("Please use a modern browser")}function e(){m.fillStyle="rgba(0, 0, 0, 0.5)",m.fillRect(0,0,400,400),a.forEach(function(t){t.draw()})}function o(){a.forEach(function(t){t.update()})}var a=[],s=8,c=4,l=24,r=400,h=400,f=new Image;f.onload=function(){a.forEach(function(t){t.setImage(f)})},f.src="http://www.blog.jonnycornwell.com/wp-content/uploads/2012/07/Smoke10.png";var m;n(),m&&setInterval(function(){o(),e()},1e3/l)}),$(function(){placeLines=function(){for(i=0;i<=9;i++){var t=$(".ball-container"+i).position().top-$(".ball-container"+(i+1)).position().top,n=$(".ball-container"+(i+1)).position().left-$(".ball-container"+i).position().left,e=Math.sqrt(t*t+n*n),o=-1*Math.atan2(t,n),a=$("#animated-line > .inner").height(),s="rotate("+o+"rad)";$(".line"+i).css({transform:s});var c=$(".ball-container"+i).offset().top+6,l=$(".ball-container"+i).offset().left+6;$(".line-box"+i).css({width:e+"px"}).offset({left:l,top:c})}},$(document).ready(function(){placeLines()}),$(window).resize(function(){console.log("resizing"),placeLines()})});